# Define a rate limiting zone based on client IP address
# 'mylimit' is the zone name, 10m is the size of the zone (stores about 160,000 IPs)
# rate=1r/s means 1 request per second
limit_req_zone $binary_remote_addr zone=mylimit:10m rate=5r/s;

# Define a connection limiting zone based on client IP address
# 'per_ip' is the zone name, 10m is the size of the zone
limit_conn_zone $binary_remote_addr zone=per_ip:10m;